import{C,H as k,D as p,ad as N,E as P,G as d,w as v,Z as B,_ as U,R as s,o as F,W as b,V as g}from"./index-3dcc8fbd.js";/* empty css              *//* empty css              */import{F as D}from"./index-8c16716c.js";import{a as l}from"./common-a47fff3e.js";import{a as f}from"./android_api-ee1231ec.js";import{a as R}from"./storage-a45bd5c0.js";import{B as $}from"./index-a7ca7fba.js";import{F as q}from"./index-cc9a13f4.js";import{_ as A}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-4ccc55cb.js";import"./use-route-fa97d2d0.js";import"./index-30732979.js";import"./constant-77ae5ca0.js";import"./index-6db50d8f.js";import"./_commonjsHelpers-edff4021.js";import"./mount-component-74e25e35.js";import"./runtime-dom.esm-bundler-65ecdaea.js";import"./on-popup-reopen-bcee1d9f.js";const r=n=>(B("data-v-30ddf941"),n=n(),U(),n),J={class:"page_container !bg-white px-10 text-[#171A1D] relative"},M=r(()=>s("div",{class:"text-3xl font-semibold mt-[15vh]"},"修改账号密码",-1)),O={class:"mt-3"},T=r(()=>s("div",{class:"text-sm mb-1"},"密码",-1)),E={class:"border-b border-[rgba(126,134,142,0.16)]"},z=r(()=>s("div",{class:"text-xs text-[#c81623] mt-2"},g("需6~20位字符"),-1)),G={class:"mt-3"},H=r(()=>s("div",{class:"text-sm mb-1"},"确认密码",-1)),W={class:"border-b border-[rgba(126,134,142,0.16)]"},Z=r(()=>s("div",{class:"text-xs text-[#c81623] mt-2"},g("需6~20位字符"),-1)),j={class:"mt-3"},K=r(()=>s("div",{class:"text-sm mb-1"},"获取验证码",-1)),L={class:"get_code"},Q={class:"border-b border-[rgba(126,134,142,0.16)]"},X={class:"mt-[20vh]"},Y=C({__name:"index",setup(n){const x=R();k();const w=localStorage.getItem("IMAccount");localStorage.getItem("IMAccount").replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3");const c=p(!1),m=p(!1),u=p(!1),_=p("获取验证码"),e=N({password:"",confirmpassword:"",code:""}),y=async()=>{let a=60;await f.call("sendSms",JSON.stringify({Phone:w,Type:3}),o=>{if(o.status===200){l({message:"获取成功"});let i=setInterval(()=>{a==0?(clearInterval(i),_.value="获取验证码",u.value=!1):(_.value=a+"秒后重试",u.value=!0,a--)},1e3)}})},I=()=>{e.password!=e.confirmpassword?l({message:"俩次密码不一致"}):e.password.length<6||e.confirmpassword.length<6?l({message:"密码至少需要6位字符"}):e.code?e.code.length!=6?l({message:"请输入6位验证码"}):V():l({message:"请输入验证码"})},V=()=>{f.call("getUserInfo",JSON.stringify({data:x}),a=>{f.call("changeUserPassword",JSON.stringify({Phone:a.Phone,Code:e.code,NewPass:e.password}),o=>{console.log(o,"data"),l({message:"修改成功"})})})};return(a,o)=>{const i=D,h=$,S=q;return F(),P("div",J,[M,d(S,{onSubmit:I},{default:v(()=>[s("div",O,[T,s("div",E,[d(i,{class:"!py-1 !pl-0",modelValue:e.password,"onUpdate:modelValue":o[0]||(o[0]=t=>e.password=t),name:"password",maxlength:"20",rules:[{required:!0,message:"请输入密码"}],type:c.value?"text":"password","right-icon":c.value?"closed-eye":"eye",onClickRightIcon:o[1]||(o[1]=t=>c.value=!c.value),placeholder:"请输入密码"},null,8,["modelValue","type","right-icon"])])]),z,s("div",G,[H,s("div",W,[d(i,{class:"!py-1 !pl-0",modelValue:e.confirmpassword,"onUpdate:modelValue":o[2]||(o[2]=t=>e.confirmpassword=t),name:"password",maxlength:"20",rules:[{required:!0,message:"请输入密码"}],type:m.value?"text":"password","right-icon":m.value?"closed-eye":"eye",onClickRightIcon:o[3]||(o[3]=t=>m.value=!m.value),placeholder:"请输入密码"},null,8,["modelValue","type","right-icon"])])]),Z,s("div",j,[K,s("div",L,[s("div",Q,[d(i,{class:"!py-1 !pl-0",clearable:"",modelValue:e.code,"onUpdate:modelValue":o[4]||(o[4]=t=>e.code=t),name:"code",maxlength:"6",rules:[{required:!0,message:"请输入验证码"}],type:"number",placeholder:"请输入验证码"},null,8,["modelValue"])]),s("div",null,[d(h,{color:"#c81623",size:"small",type:"primary",onClick:y,disabled:u.value},{default:v(()=>[b(g(_.value),1)]),_:1},8,["disabled"])])])]),s("div",X,[d(h,{color:"#c81623",disabled:!(e.password&&e.confirmpassword&&e.code),block:"",type:"primary","native-type":"submit"},{default:v(()=>[b(" 确认 ")]),_:1},8,["disabled"])])]),_:1})])}}});const be=A(Y,[["__scopeId","data-v-30ddf941"]]);export{be as default};
