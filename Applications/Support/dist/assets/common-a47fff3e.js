import{C as I,O as k,l as B,m as M,G as c,$ as w,a0 as N,a1 as $,a2 as b,a3 as D,a4 as z,D as L,p as j}from"./index-3dcc8fbd.js";/* empty css              */import{i as U}from"./index-6db50d8f.js";import{P as F,m as H,a as V}from"./mount-component-74e25e35.js";import{c as _,m as y,n as v,b as q,g as C,I as G,w as Y}from"./index-4ccc55cb.js";import{L as A}from"./index-30732979.js";let f=0;function E(e){e?(f||document.body.classList.add("van-toast--unclickable"),f++):f&&(f--,f||document.body.classList.remove("van-toast--unclickable"))}const[J,d]=_("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Q={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:v,iconSize:v,duration:q(2e3),position:y("middle"),teleport:[String,Object],wordBreak:String,className:C,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:C,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var O=I({name:J,props:Q,emits:["update:show"],setup(e,{emit:t,slots:o}){let i,n=!1;const l=()=>{const a=e.show&&e.forbidClick;n!==a&&(n=a,E(n))},r=a=>t("update:show",a),u=()=>{e.closeOnClick&&r(!1)},m=()=>clearTimeout(i),g=()=>{const{icon:a,type:s,iconSize:S,iconPrefix:T,loadingType:x}=e;if(a||s==="success"||s==="fail")return c(G,{name:a||s,size:S,class:d("icon"),classPrefix:T},null);if(s==="loading")return c(A,{class:d("loading"),size:S,type:x},null)},P=()=>{const{type:a,message:s}=e;if(o.message)return c("div",{class:d("text")},[o.message()]);if($(s)&&s!=="")return a==="html"?c("div",{key:0,class:d("text"),innerHTML:String(s)},null):c("div",{class:d("text")},[s])};return k(()=>[e.show,e.forbidClick],l),k(()=>[e.show,e.type,e.message,e.duration],()=>{m(),e.show&&e.duration>0&&(i=setTimeout(()=>{r(!1)},e.duration))}),B(l),M(l),()=>c(F,w({class:[d([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:u,onClosed:m,"onUpdate:show":r},N(e,K)),{default:()=>[g(),P()]})}});const R={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let p=[],W=!1,h=b({},R);const X=new Map;function Z(e){return z(e)?e:{message:e}}function ee(){const{instance:e,unmount:t}=H({setup(){const o=L(""),{open:i,state:n,close:l,toggle:r}=V(),u=()=>{},m=()=>c(O,w(n,{onClosed:u,"onUpdate:show":r}),null);return k(o,g=>{n.message=g}),j().render=m,{open:i,close:l,message:o}}});return e}function te(){if(!p.length||W){const e=ee();p.push(e)}return p[p.length-1]}function oe(e={}){if(!D)return{};const t=te(),o=Z(e);return t.open(b({},h,X.get(o.type||h.type),o)),t}Y(O);const{t:ne}=U.global,ue=e=>{const{message:t,error:o,duration:i,onClose:n=()=>{}}=e!=null?e:{};oe({className:"my_toast",message:t!=null?t:ne(o?"messageTip.nomalFailed":"messageTip.nomalSuccess"),type:o?"fail":"success",onClose:n,duration:i}),o&&console.error(t,o)},me=e=>{const t=new Date(e),o=t.getFullYear(),i=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0"),l=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0"),u=t.getSeconds().toString().padStart(2,"0");return`${o}-${i}-${n} ${l}:${r}:${u}`};export{ue as a,me as f};
