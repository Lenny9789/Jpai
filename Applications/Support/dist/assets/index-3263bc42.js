import{C as I,am as A,D as m,l as b,ap as N,E as d,R as w,c as O,Y as U,o as p,Z as C,_ as S}from"./index-3dcc8fbd.js";/* empty css              */import{a as t}from"./common-a47fff3e.js";import{a as i}from"./android_api-ee1231ec.js";import{a as u}from"./axios-213479dd.js";import{a as k}from"./storage-a45bd5c0.js";import{I as E}from"./index-459d0a79.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css              */import"./index-6db50d8f.js";import"./_commonjsHelpers-edff4021.js";import"./mount-component-74e25e35.js";import"./runtime-dom.esm-bundler-65ecdaea.js";import"./index-4ccc55cb.js";import"./index-30732979.js";import"./constant-77ae5ca0.js";import"./on-popup-reopen-bcee1d9f.js";const j=n=>(C("data-v-b017e1c9"),n=n(),S(),n),H={class:"online_box"},M={class:"imgList"},B={key:0,class:"null_img"},x=j(()=>w("div",null,"当前账号尚未上传收款图片",-1)),W=[x],D={class:"btn_box"},V=I({__name:"index",setup(n){const R=A(),_=m(),c=k(),s=m(),o=m(!0),h=m(),g=m(),y=()=>{console.log("触发"),console.log(s.value),Number(_.value)==1?g.value=h.value+s.value.PayPal_Url:g.value=h.value+s.value.WeChat_Url},P=()=>{i.call("getMinIOConfit",null,e=>{e.status==200?h.value="http://"+e.data.end_point+"/":t({message:"获取失败"})})},f=async()=>{Number(_.value)==1?await i.call("getAlbumResource",JSON.stringify({bucket_name:"shop",purpose_code:1}),e=>{if(e.status==200){t({message:e.data.object+"??"});const l=e.data.bucket+"/"+e.data.object;u.post("http://www.myjpai.com:10066/api/AB/UpdatePayImg",{UserId:c,PayPal_Url:l}).then(a=>{t({message:"上传成功"}),r()}).catch(a=>{t({message:"上传失败"})})}}):await i.call("getAlbumResource",JSON.stringify({bucket_name:"shop",purpose_code:1}),e=>{if(e.status==200){const l=e.data.bucket+"/"+e.data.object;u.post("http://www.myjpai.com:10066/api/AB/UpdatePayImg",{UserId:c,WeChat_Url:l}).then(a=>{t({message:"上传成功"}),r()}).catch(a=>{t({message:"上传失败"})})}else t({message:"上传失败"})})},L=async()=>{Number(_.value)==1?await i.call("getAlbumResource",JSON.stringify({bucket_name:"shop",purpose_code:1}),e=>{if(e.status==200){const l=e.data.bucket+"/"+e.data.object;u.post("http://www.myjpai.com:10066/api/AB/AddPayImg",{UserId:c,PayPal_Url:l}).then(a=>{t({message:"上传成功"}),r()}).catch(a=>{t({message:"上传失败"})})}else t({message:"上传失败"})}):await i.call("getAlbumResource",JSON.stringify({bucket_name:"shop",purpose_code:1}),e=>{if(e.status==200){const l=e.data.bucket+"/"+e.data.object;u.post("http://www.myjpai.com:10066/api/AB/AddPayImg",{UserId:c,WeChat_Url:l}).then(a=>{t({message:"上传成功"}),r()}).catch(a=>{t({message:"上传失败ll"})})}else t({message:"上传失败"})})},v=()=>{s.value.PayPal_Url==""&&s.value.WeChat_Url==""?L():f()},r=()=>{u.post("http://www.myjpai.com:10066/api/AB/GetPayImg",{UserId:c}).then(e=>{s.value=e.data.data,console.log(s.value),Number(_.value)==1?s.value.PayPal_Url==""?o.value=!1:o.value=!0:s.value.WeChat_Url==""?o.value=!1:o.value=!0,y()}).catch(e=>{t({message:"获取初始化参数失败"})})};return b(()=>{_.value=R.query.pay_type,console.log(_.value)}),N(()=>{P(),r()}),(e,l)=>{const a=E;return p(),d("div",H,[w("div",M,[o.value==!0?(p(),O(a,{key:0,src:g.value},null,8,["src"])):U("",!0)]),o.value==!1?(p(),d("div",B,W)):U("",!0),w("div",D,[o.value==!1?(p(),d("button",{key:0,onClick:v},"上传支付图片")):U("",!0),o.value==!0?(p(),d("button",{key:1,onClick:v},"更改支付图片")):U("",!0)])])}}});const _e=T(V,[["__scopeId","data-v-b017e1c9"]]);export{_e as default};
