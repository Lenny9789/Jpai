import{a2 as X,C as N,G as d,$ as De,a0 as ce,n as j,a1 as Ie,D as R,N as I,ak as st,O as M,a3 as Mt,a7 as rt,a8 as ut,ad as ve,l as Fe,aa as dt,as as $t,at as Ht,au as Vt,ab as Nt,a9 as Yt,p as Ut,av as fe,aw as We,E as ft,R as te,V as Ae,ax as Lt,o as Be,H as zt,U as xe,w as oe,c as Ge,W as Ft,P as Qt}from"./index-3dcc8fbd.js";/* empty css              *//* empty css              */import{d as Xe}from"./index-6db50d8f.js";/* empty css              *//* empty css              */import{u as vt,F as Jt}from"./index-8c16716c.js";/* empty css              */import{c as K,t as Q,x as me,m as pe,I as Qe,w as ne,D as ie,n as Z,v as le,q as _e,d as ye,p as Je,L as mt,M as Ue,N as ht,O as Kt,o as gt,A as bt,P as Ke,i as jt,B as be,e as de,r as je,s as yt,a as J,l as Re,Q as Zt,R as ge,f as qe,F as Wt,S as et,T as Gt,g as Xt,y as wt}from"./index-4ccc55cb.js";import{a as ue}from"./common-a47fff3e.js";import{a as Te}from"./android_api-ee1231ec.js";import{p as qt,b as en,P as tn,u as xt,c as nn}from"./mount-component-74e25e35.js";import{L as Tt,u as se}from"./index-30732979.js";import{H as Le,e as an,f as on}from"./constant-77ae5ca0.js";import{v as ln}from"./runtime-dom.esm-bundler-65ecdaea.js";import{a as cn,r as sn}from"./use-route-fa97d2d0.js";import{u as rn}from"./use-refs-a75f9fe4.js";import{o as kt}from"./on-popup-reopen-bcee1d9f.js";import{T as un}from"./use-tab-status-5f821b4e.js";import{I as dn}from"./index-459d0a79.js";import{B as fn}from"./index-a7ca7fba.js";import{D as vn}from"./index-0f6eb419.js";import"./_commonjsHelpers-edff4021.js";import"./Dialog-ab618176.js";import"./use-placeholder-ddc70116.js";const[mn,G]=K("action-sheet"),hn=X({},qt,{title:String,round:Q,actions:me(),closeIcon:pe("cross"),closeable:Q,cancelText:String,description:String,closeOnPopstate:Q,closeOnClickAction:Boolean,safeAreaInsetBottom:Q}),gn=[...en,"round","closeOnPopstate","safeAreaInsetBottom"];var bn=N({name:mn,props:hn,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:a}){const o=c=>a("update:show",c),l=()=>{o(!1),a("cancel")},t=()=>{if(e.title)return d("div",{class:G("header")},[e.title,e.closeable&&d(Qe,{name:e.closeIcon,class:[G("close"),Le],onClick:l},null)])},u=()=>{if(n.cancel||e.cancelText)return[d("div",{class:G("gap")},null),d("button",{type:"button",class:G("cancel"),onClick:l},[n.cancel?n.cancel():e.cancelText])]},i=(c,g)=>c.loading?d(Tt,{class:G("loading-icon")},null):n.action?n.action({action:c,index:g}):[d("span",{class:G("name")},[c.name]),c.subname&&d("div",{class:G("subname")},[c.subname])],f=(c,g)=>{const{color:h,loading:B,callback:k,disabled:D,className:y}=c,m=()=>{D||B||(k&&k(c),e.closeOnClickAction&&o(!1),j(()=>a("select",c,g)))};return d("button",{type:"button",style:{color:h},class:[G("item",{loading:B,disabled:D}),y],onClick:m},[i(c,g)])},b=()=>{if(e.description||n.description){const c=n.description?n.description():e.description;return d("div",{class:G("description")},[c])}};return()=>d(tn,De({class:G(),position:"bottom","onUpdate:show":o},ce(e,gn)),{default:()=>{var c;return[t(),b(),d("div",{class:G("content")},[e.actions.map(f),(c=n.default)==null?void 0:c.call(n)]),u()]}})}});const yn=ne(bn),[wn,ee,tt]=K("picker"),Ct=e=>e.find(n=>!n.disabled)||e[0];function xn(e,n){const a=e[0];if(a){if(Array.isArray(a))return"multiple";if(n.children in a)return"cascade"}return"default"}function Oe(e,n){n=ie(n,0,e.length);for(let a=n;a<e.length;a++)if(!e[a].disabled)return a;for(let a=n-1;a>=0;a--)if(!e[a].disabled)return a;return 0}const nt=(e,n,a)=>n!==void 0&&!!e.find(o=>o[a.value]===n);function ze(e,n,a){const o=e.findIndex(t=>t[a.value]===n),l=Oe(e,o);return e[l]}function Tn(e,n,a){const o=[];let l={[n.children]:e},t=0;for(;l&&l[n.children];){const u=l[n.children],i=a.value[t];if(l=Ie(i)?ze(u,i,n):void 0,!l&&u.length){const f=Ct(u)[n.value];l=ze(u,f,n)}t++,o.push(u)}return o}function kn(e){const{transform:n}=window.getComputedStyle(e),a=n.slice(7,n.length-1).split(", ")[5];return Number(a)}function Cn(e){return X({text:"text",value:"value",children:"children"},e)}const at=200,ot=300,Sn=15,[St,He]=K("picker-column"),At=Symbol(St);var An=N({name:St,props:{value:Z,fields:le(Object),options:me(),readonly:Boolean,allowHtml:Boolean,optionHeight:le(Number),swipeDuration:le(Z),visibleOptionNum:le(Z)},emits:["change","clickOption","scrollInto"],setup(e,{emit:n,slots:a}){let o,l,t,u,i;const f=R(),b=R(),c=R(0),g=R(0),h=xt(),B=()=>e.options.length,k=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,D=x=>{let s=Oe(e.options,x);const r=-s*e.optionHeight,S=()=>{s>B()-1&&(s=Oe(e.options,x));const U=e.options[s][e.fields.value];U!==e.value&&n("change",U)};o&&r!==c.value?i=S:S(),c.value=r},y=()=>e.readonly||!e.options.length,m=x=>{o||y()||(i=null,g.value=at,D(x),n("clickOption",e.options[x]))},w=x=>ie(Math.round(-x/e.optionHeight),0,B()-1),O=I(()=>w(c.value)),C=(x,s)=>{const r=Math.abs(x/s);x=c.value+r/.003*(x<0?-1:1);const S=w(x);g.value=+e.swipeDuration,D(S)},_=()=>{o=!1,g.value=0,i&&(i(),i=null)},H=x=>{if(!y()){if(h.start(x),o){const s=kn(b.value);c.value=Math.min(0,s-k())}g.value=0,l=c.value,t=Date.now(),u=l,i=null}},Y=x=>{if(y())return;h.move(x),h.isVertical()&&(o=!0,Je(x,!0));const s=ie(l+h.deltaY.value,-(B()*e.optionHeight),e.optionHeight),r=w(s);r!==O.value&&n("scrollInto",e.options[r]),c.value=s;const S=Date.now();S-t>ot&&(t=S,u=s)},F=()=>{if(y())return;const x=c.value-u,s=Date.now()-t;if(s<ot&&Math.abs(x)>Sn){C(x,s);return}const S=w(c.value);g.value=at,D(S),setTimeout(()=>{o=!1},0)},$=()=>{const x={height:`${e.optionHeight}px`};return e.options.map((s,r)=>{const S=s[e.fields.text],{disabled:U}=s,q=s[e.fields.value],he={role:"button",style:x,tabindex:U?-1:0,class:[He("item",{disabled:U,selected:q===e.value}),s.className],onClick:()=>m(r)},re={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:S};return d("li",he,[a.option?a.option(s,r):d("div",re,null)])})};return _e(At),se({stopMomentum:_}),st(()=>{const x=o?Math.floor(-c.value/e.optionHeight):e.options.findIndex(S=>S[e.fields.value]===e.value),s=Oe(e.options,x),r=-s*e.optionHeight;o&&s<x&&_(),c.value=r}),ye("touchmove",Y,{target:f}),()=>d("div",{ref:f,class:He(),onTouchstartPassive:H,onTouchend:F,onTouchcancel:F},[d("ul",{ref:b,style:{transform:`translate3d(0, ${c.value+k()}px, 0)`,transitionDuration:`${g.value}ms`,transitionProperty:g.value?"all":"none"},class:He("wrapper"),onTransitionend:_},[$()])])}});const[Bn]=K("picker-toolbar"),Pe={title:String,cancelButtonText:String,confirmButtonText:String},Bt=["cancel","confirm","title","toolbar"],On=Object.keys(Pe);var Ot=N({name:Bn,props:Pe,emits:["confirm","cancel"],setup(e,{emit:n,slots:a}){const o=()=>{if(a.title)return a.title();if(e.title)return d("div",{class:[ee("title"),"van-ellipsis"]},[e.title])},l=()=>n("cancel"),t=()=>n("confirm"),u=()=>{const f=e.cancelButtonText||tt("cancel");return d("button",{type:"button",class:[ee("cancel"),Le],onClick:l},[a.cancel?a.cancel():f])},i=()=>{const f=e.confirmButtonText||tt("confirm");return d("button",{type:"button",class:[ee("confirm"),Le],onClick:t},[a.confirm?a.confirm():f])};return()=>d("div",{class:ee("toolbar")},[a.toolbar?a.toolbar():[u(),o(),i()]])}});const In=(e,n)=>{const a=R(e());return M(e,o=>{o!==a.value&&(a.value=o)}),M(a,o=>{o!==e()&&n(o)}),a};function Dn(e,n,a){let o,l=0;const t=e.scrollLeft,u=a===0?1:Math.round(a*1e3/16);function i(){mt(o)}function f(){e.scrollLeft+=(n-t)/u,++l<u&&(o=Ue(f))}return f(),i}function pn(e,n,a,o){let l,t=ht(e);const u=t<n,i=a===0?1:Math.round(a*1e3/16),f=(n-t)/i;function b(){mt(l)}function c(){t+=f,(u&&t>n||!u&&t<n)&&(t=n),Kt(e,t),u&&t<n||!u&&t>n?l=Ue(c):o&&(l=Ue(o))}return c(),b}function It(e,n){if(!Mt||!window.IntersectionObserver)return;const a=new IntersectionObserver(t=>{n(t[0].intersectionRatio>0)},{root:document.body}),o=()=>{e.value&&a.observe(e.value)},l=()=>{e.value&&a.unobserve(e.value)};rt(l),ut(l),gt(o)}const[_n,Rn]=K("sticky"),Pn={zIndex:Z,position:pe("top"),container:Object,offsetTop:J(0),offsetBottom:J(0)};var En=N({name:_n,props:Pn,emits:["scroll","change"],setup(e,{emit:n,slots:a}){const o=R(),l=bt(o),t=ve({fixed:!1,width:0,height:0,transform:0}),u=R(!1),i=I(()=>Ke(e.position==="top"?e.offsetTop:e.offsetBottom)),f=I(()=>{if(u.value)return;const{fixed:h,height:B,width:k}=t;if(h)return{width:`${k}px`,height:`${B}px`}}),b=I(()=>{if(!t.fixed||u.value)return;const h=X(jt(e.zIndex),{width:`${t.width}px`,height:`${t.height}px`,[e.position]:`${i.value}px`});return t.transform&&(h.transform=`translate3d(0, ${t.transform}px, 0)`),h}),c=h=>n("scroll",{scrollTop:h,isFixed:t.fixed}),g=()=>{if(!o.value||be(o))return;const{container:h,position:B}=e,k=de(o),D=ht(window);if(t.width=k.width,t.height=k.height,B==="top")if(h){const y=de(h),m=y.bottom-i.value-t.height;t.fixed=i.value>k.top&&y.bottom>0,t.transform=m<0?m:0}else t.fixed=i.value>k.top;else{const{clientHeight:y}=document.documentElement;if(h){const m=de(h),w=y-m.top-i.value-t.height;t.fixed=y-i.value<k.bottom&&y>m.top,t.transform=w<0?-w:0}else t.fixed=y-i.value<k.bottom}c(D)};return M(()=>t.fixed,h=>n("change",h)),ye("scroll",g,{target:l,passive:!0}),It(o,g),M([je,yt],()=>{!o.value||be(o)||!t.fixed||(u.value=!0,j(()=>{const h=de(o);t.width=h.width,t.height=h.height,u.value=!1}))}),()=>{var h;return d("div",{ref:o,style:f.value},[d("div",{class:Rn({fixed:t.fixed&&!u.value}),style:b.value},[(h=a.default)==null?void 0:h.call(a)])])}}});const Mn=ne(En),[Dt,ke]=K("swipe"),$n={loop:Q,width:Z,height:Z,vertical:Boolean,autoplay:J(0),duration:J(500),touchable:Q,lazyRender:Boolean,initialSwipe:J(0),indicatorColor:String,showIndicators:Q,stopPropagation:Q},pt=Symbol(Dt);var Hn=N({name:Dt,props:$n,emits:["change","dragStart","dragEnd"],setup(e,{emit:n,slots:a}){const o=R(),l=R(),t=ve({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let u=!1;const i=xt(),{children:f,linkChildren:b}=Re(pt),c=I(()=>f.length),g=I(()=>t[e.vertical?"height":"width"]),h=I(()=>e.vertical?i.deltaY.value:i.deltaX.value),B=I(()=>t.rect?(e.vertical?t.rect.height:t.rect.width)-g.value*c.value:0),k=I(()=>g.value?Math.ceil(Math.abs(B.value)/g.value):c.value),D=I(()=>c.value*g.value),y=I(()=>(t.active+c.value)%c.value),m=I(()=>{const T=e.vertical?"vertical":"horizontal";return i.direction.value===T}),w=I(()=>{const T={transitionDuration:`${t.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${t.offset}px)`};if(g.value){const P=e.vertical?"height":"width",E=e.vertical?"width":"height";T[P]=`${D.value}px`,T[E]=e[E]?`${e[E]}px`:""}return T}),O=T=>{const{active:P}=t;return T?e.loop?ie(P+T,-1,c.value):ie(P+T,0,k.value):P},C=(T,P=0)=>{let E=T*g.value;e.loop||(E=Math.min(E,-B.value));let L=P-E;return e.loop||(L=ie(L,B.value,0)),L},_=({pace:T=0,offset:P=0,emitChange:E})=>{if(c.value<=1)return;const{active:L}=t,v=O(T),A=C(v,P);if(e.loop){if(f[0]&&A!==B.value){const p=A<B.value;f[0].setOffset(p?D.value:0)}if(f[c.value-1]&&A!==0){const p=A>0;f[c.value-1].setOffset(p?-D.value:0)}}t.active=v,t.offset=A,E&&v!==L&&n("change",y.value)},H=()=>{t.swiping=!0,t.active<=-1?_({pace:c.value}):t.active>=c.value&&_({pace:-c.value})},Y=()=>{H(),i.reset(),ge(()=>{t.swiping=!1,_({pace:-1,emitChange:!0})})},F=()=>{H(),i.reset(),ge(()=>{t.swiping=!1,_({pace:1,emitChange:!0})})};let $;const x=()=>clearTimeout($),s=()=>{x(),+e.autoplay>0&&c.value>1&&($=setTimeout(()=>{F(),s()},+e.autoplay))},r=(T=+e.initialSwipe)=>{if(!o.value)return;const P=()=>{var E,L;if(!be(o)){const v={width:o.value.offsetWidth,height:o.value.offsetHeight};t.rect=v,t.width=+((E=e.width)!=null?E:v.width),t.height=+((L=e.height)!=null?L:v.height)}c.value&&(T=Math.min(c.value-1,T),T===-1&&(T=c.value-1)),t.active=T,t.swiping=!0,t.offset=C(T),f.forEach(v=>{v.setOffset(0)}),s()};be(o)?j().then(P):P()},S=()=>r(t.active);let U;const q=T=>{!e.touchable||T.touches.length>1||(i.start(T),u=!1,U=Date.now(),x(),H())},he=T=>{e.touchable&&t.swiping&&(i.move(T),m.value&&(!e.loop&&(t.active===0&&h.value>0||t.active===c.value-1&&h.value<0)||(Je(T,e.stopPropagation),_({offset:h.value}),u||(n("dragStart",{index:y.value}),u=!0))))},re=()=>{if(!e.touchable||!t.swiping)return;const T=Date.now()-U,P=h.value/T;if((Math.abs(P)>.25||Math.abs(h.value)>g.value/2)&&m.value){const L=e.vertical?i.offsetY.value:i.offsetX.value;let v=0;e.loop?v=L>0?h.value>0?-1:1:0:v=-Math[h.value>0?"ceil":"floor"](h.value/g.value),_({pace:v,emitChange:!0})}else h.value&&_({pace:0});u=!1,t.swiping=!1,n("dragEnd",{index:y.value}),s()},Ee=(T,P={})=>{H(),i.reset(),ge(()=>{let E;e.loop&&T===c.value?E=t.active===0?0:T:E=T%c.value,P.immediate?ge(()=>{t.swiping=!1}):t.swiping=!1,_({pace:E-t.active,emitChange:!0})})},Me=(T,P)=>{const E=P===y.value,L=E?{backgroundColor:e.indicatorColor}:void 0;return d("i",{style:L,class:ke("indicator",{active:E})},null)},$e=()=>{if(a.indicator)return a.indicator({active:y.value,total:c.value});if(e.showIndicators&&c.value>1)return d("div",{class:ke("indicators",{vertical:e.vertical})},[Array(c.value).fill("").map(Me)])};return se({prev:Y,next:F,state:t,resize:S,swipeTo:Ee}),b({size:g,props:e,count:c,activeIndicator:y}),M(()=>e.initialSwipe,T=>r(+T)),M(c,()=>r(t.active)),M(()=>e.autoplay,s),M([je,yt,()=>e.width,()=>e.height],S),M(Zt(),T=>{T==="visible"?s():x()}),Fe(r),dt(()=>r(t.active)),kt(()=>r(t.active)),rt(x),ut(x),ye("touchmove",he,{target:l}),()=>{var T;return d("div",{ref:o,class:ke()},[d("div",{ref:l,style:w.value,class:ke("track",{vertical:e.vertical}),onTouchstartPassive:q,onTouchend:re,onTouchcancel:re},[(T=a.default)==null?void 0:T.call(a)]),$e()])}}});const Vn=ne(Hn),[Nn,lt]=K("tabs");var Yn=N({name:Nn,props:{count:le(Number),inited:Boolean,animated:Boolean,duration:le(Z),swipeable:Boolean,lazyRender:Boolean,currentIndex:le(Number)},emits:["change"],setup(e,{emit:n,slots:a}){const o=R(),l=i=>n("change",i),t=()=>{var i;const f=(i=a.default)==null?void 0:i.call(a);return e.animated||e.swipeable?d(Vn,{ref:o,loop:!1,class:lt("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:l},{default:()=>[f]}):f},u=i=>{const f=o.value;f&&f.state.active!==i&&f.swipeTo(i,{immediate:!e.inited})};return M(()=>e.currentIndex,u),Fe(()=>{u(e.currentIndex)}),se({swipeRef:o}),()=>d("div",{class:lt("content",{animated:e.animated||e.swipeable})},[t()])}});const[_t,Ce]=K("tabs"),Un={type:pe("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:J(0),duration:J(.3),animated:Boolean,ellipsis:Q,swipeable:Boolean,scrollspy:Boolean,offsetTop:J(0),background:String,lazyRender:Q,lineWidth:Z,lineHeight:Z,beforeChange:Function,swipeThreshold:J(5),titleActiveColor:String,titleInactiveColor:String},Rt=Symbol(_t);var Ln=N({name:_t,props:Un,emits:["change","scroll","rendered","clickTab","update:active"],setup(e,{emit:n,slots:a}){let o,l,t,u,i;const f=R(),b=R(),c=R(),g=R(),h=vt(),B=bt(f),[k,D]=rn(),{children:y,linkChildren:m}=Re(Rt),w=ve({inited:!1,position:"",lineStyle:{},currentIndex:-1}),O=I(()=>y.length>+e.swipeThreshold||!e.ellipsis||e.shrink),C=I(()=>({borderColor:e.color,background:e.background})),_=(v,A)=>{var p;return(p=v.name)!=null?p:A},H=I(()=>{const v=y[w.currentIndex];if(v)return _(v,w.currentIndex)}),Y=I(()=>Ke(e.offsetTop)),F=I(()=>e.sticky?Y.value+o:0),$=v=>{const A=b.value,p=k.value;if(!O.value||!A||!p||!p[w.currentIndex])return;const z=p[w.currentIndex].$el,V=z.offsetLeft-(A.offsetWidth-z.offsetWidth)/2;u&&u(),u=Dn(A,V,v?0:+e.duration)},x=()=>{const v=w.inited;j(()=>{const A=k.value;if(!A||!A[w.currentIndex]||e.type!=="line"||be(f.value))return;const p=A[w.currentIndex].$el,{lineWidth:z,lineHeight:V}=e,W=p.offsetLeft+p.offsetWidth/2,ae={width:qe(z),backgroundColor:e.color,transform:`translateX(${W}px) translateX(-50%)`};if(v&&(ae.transitionDuration=`${e.duration}s`),Ie(V)){const we=qe(V);ae.height=we,ae.borderRadius=we}w.lineStyle=ae})},s=v=>{const A=v<w.currentIndex?-1:1;for(;v>=0&&v<y.length;){if(!y[v].disabled)return v;v+=A}},r=(v,A)=>{const p=s(v);if(!Ie(p))return;const z=y[p],V=_(z,p),W=w.currentIndex!==null;w.currentIndex!==p&&(w.currentIndex=p,A||$(),x()),V!==e.active&&(n("update:active",V),W&&n("change",V,z.title)),t&&!e.scrollspy&&Wt(Math.ceil(et(f.value)-Y.value))},S=(v,A)=>{const p=y.find((V,W)=>_(V,W)===v),z=p?y.indexOf(p):0;r(z,A)},U=(v=!1)=>{if(e.scrollspy){const A=y[w.currentIndex].$el;if(A&&B.value){const p=et(A,B.value)-F.value;l=!0,i&&i(),i=pn(B.value,p,v?0:+e.duration,()=>{l=!1})}}},q=(v,A,p)=>{const{title:z,disabled:V}=y[A],W=_(y[A],A);V||(nn(e.beforeChange,{args:[W],done:()=>{r(A),U()}}),cn(v)),n("clickTab",{name:W,title:z,event:p,disabled:V})},he=v=>{t=v.isFixed,n("scroll",v)},re=v=>{j(()=>{S(v),U(!0)})},Ee=()=>{for(let v=0;v<y.length;v++){const{top:A}=de(y[v].$el);if(A>F.value)return v===0?0:v-1}return y.length-1},Me=()=>{if(e.scrollspy&&!l){const v=Ee();r(v)}},$e=()=>{if(e.type==="line"&&y.length)return d("div",{class:Ce("line"),style:w.lineStyle},null)},T=()=>{var v,A,p;const{type:z,border:V,sticky:W}=e,ae=[d("div",{ref:W?void 0:c,class:[Ce("wrap"),{[an]:z==="line"&&V}]},[d("div",{ref:b,role:"tablist",class:Ce("nav",[z,{shrink:e.shrink,complete:O.value}]),style:C.value,"aria-orientation":"horizontal"},[(v=a["nav-left"])==null?void 0:v.call(a),y.map(we=>we.renderTitle(q)),$e(),(A=a["nav-right"])==null?void 0:A.call(a)])]),(p=a["nav-bottom"])==null?void 0:p.call(a)];return W?d("div",{ref:c},[ae]):ae},P=()=>{x(),j(()=>{var v,A;$(!0),(A=(v=g.value)==null?void 0:v.swipeRef.value)==null||A.resize()})};M(()=>[e.color,e.duration,e.lineWidth,e.lineHeight],x),M(je,P),M(()=>e.active,v=>{v!==H.value&&S(v)}),M(()=>y.length,()=>{w.inited&&(S(e.active),x(),j(()=>{$(!0)}))});const E=()=>{S(e.active,!0),j(()=>{w.inited=!0,c.value&&(o=de(c.value).height),$(!0)})},L=(v,A)=>n("rendered",v,A);return se({resize:P,scrollTo:re}),dt(x),kt(x),gt(E),It(f,x),ye("scroll",Me,{target:B,passive:!0}),m({id:h,props:e,setLine:x,scrollable:O,onRendered:L,currentName:H,setTitleRefs:D,scrollIntoView:$}),()=>d("div",{ref:f,class:Ce([e.type])},[e.sticky?d(Mn,{container:f.value,offsetTop:Y.value,onScroll:he},{default:()=>[T()]}):T(),d(Yn,{ref:g,count:y.length,inited:w.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:w.currentIndex,onChange:r},{default:()=>{var v;return[(v=a.default)==null?void 0:v.call(a)]}})])}});const[zn,it]=K("tab"),Fn=N({name:zn,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:Z,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:Q},setup(e,{slots:n}){const a=I(()=>{const l={},{type:t,color:u,disabled:i,isActive:f,activeColor:b,inactiveColor:c}=e;u&&t==="card"&&(l.borderColor=u,i||(f?l.backgroundColor=u:l.color=u));const h=f?b:c;return h&&(l.color=h),l}),o=()=>{const l=d("span",{class:it("text",{ellipsis:!e.scrollable})},[n.title?n.title():e.title]);return e.dot||Ie(e.badge)&&e.badge!==""?d(Gt,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[l]}):l};return()=>d("div",{id:e.id,role:"tab",class:[it([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:a.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[o()])}}),[Qn,Jn]=K("swipe-item");var Kn=N({name:Qn,setup(e,{slots:n}){let a;const o=ve({offset:0,inited:!1,mounted:!1}),{parent:l,index:t}=_e(pt);if(!l)return;const u=I(()=>{const b={},{vertical:c}=l.props;return l.size.value&&(b[c?"height":"width"]=`${l.size.value}px`),o.offset&&(b.transform=`translate${c?"Y":"X"}(${o.offset}px)`),b}),i=I(()=>{const{loop:b,lazyRender:c}=l.props;if(!c||a)return!0;if(!o.mounted)return!1;const g=l.activeIndicator.value,h=l.count.value-1,B=g===0&&b?h:g-1,k=g===h&&b?0:g+1;return a=t.value===g||t.value===B||t.value===k,a}),f=b=>{o.offset=b};return Fe(()=>{j(()=>{o.mounted=!0})}),se({setOffset:f}),()=>{var b;return d("div",{class:Jn(),style:u.value},[i.value?(b=n.default)==null?void 0:b.call(n):null])}}});const jn=ne(Kn),[Zn,Ve]=K("tab"),Wn=X({},sn,{dot:Boolean,name:Z,badge:Z,title:String,disabled:Boolean,titleClass:Xt,titleStyle:[String,Object],showZeroBadge:Q});var Gn=N({name:Zn,props:Wn,setup(e,{slots:n}){const a=vt(),o=R(!1),l=Ut(),{parent:t,index:u}=_e(Rt);if(!t)return;const i=()=>{var k;return(k=e.name)!=null?k:u.value},f=()=>{o.value=!0,t.props.lazyRender&&j(()=>{t.onRendered(i(),e.title)})},b=I(()=>{const k=i()===t.currentName.value;return k&&!o.value&&f(),k}),c=R(""),g=R("");st(()=>{const{titleClass:k,titleStyle:D}=e;c.value=k?$t(k):"",g.value=D&&typeof D!="string"?Ht(Vt(D)):D});const h=k=>d(Fn,De({key:a,id:`${t.id}-${u.value}`,ref:t.setTitleRefs(u.value),style:g.value,class:c.value,isActive:b.value,controls:a,scrollable:t.scrollable.value,activeColor:t.props.titleActiveColor,inactiveColor:t.props.titleInactiveColor,onClick:D=>k(l.proxy,u.value,D)},ce(t.props,["type","color","shrink"]),ce(e,["dot","badge","title","disabled","showZeroBadge"])),{title:n.title}),B=R(!b.value);return M(b,k=>{k?B.value=!1:ge(()=>{B.value=!0})}),M(()=>e.title,()=>{t.setLine(),t.scrollIntoView()}),Nt(un,b),se({id:a,renderTitle:h}),()=>{var k;const D=`${t.id}-${u.value}`,{animated:y,swipeable:m,scrollspy:w,lazyRender:O}=t.props;if(!n.default&&!y)return;const C=w||b.value;if(y||m)return d(jn,{id:a,role:"tabpanel",class:Ve("panel-wrapper",{inactive:B.value}),tabindex:b.value?0:-1,"aria-hidden":!b.value,"aria-labelledby":D},{default:()=>{var Y;return[d("div",{class:Ve("panel")},[(Y=n.default)==null?void 0:Y.call(n)])]}});const H=o.value||w||!O?(k=n.default)==null?void 0:k.call(n):null;return Yt(d("div",{id:a,role:"tabpanel",class:Ve("panel"),tabindex:C?0:-1,"aria-labelledby":D},[H]),[[ln,C]])}}});const Xn=ne(Gn),qn=ne(Ln),[Pt,Ne]=K("picker-group"),Et=Symbol(Pt),ea=X({tabs:me(),activeTab:J(0),nextStepText:String},Pe);N({name:Pt,props:ea,emits:["confirm","cancel","update:activeTab"],setup(e,{emit:n,slots:a}){const o=In(()=>e.activeTab,b=>n("update:activeTab",b)),{children:l,linkChildren:t}=Re(Et);t();const u=()=>+o.value<e.tabs.length-1&&e.nextStepText,i=()=>{u()?o.value=+o.value+1:n("confirm",l.map(b=>b.confirm()))},f=()=>n("cancel");return()=>{var b;const c=(b=a.default)==null?void 0:b.call(a),g=u()?e.nextStepText:e.confirmButtonText;return d("div",{class:Ne()},[d(Ot,{title:e.title,cancelButtonText:e.cancelButtonText,confirmButtonText:g,onConfirm:i,onCancel:f},ce(a,Bt)),d(qn,{active:o.value,"onUpdate:active":h=>o.value=h,class:Ne("tabs"),shrink:!0,animated:!0,lazyRender:!1},{default:()=>[e.tabs.map((h,B)=>d(Xn,{title:h,titleClass:Ne("tab-title")},{default:()=>[c==null?void 0:c[B]]}))]})])}}});const Ze=X({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:J(44),showToolbar:Q,swipeDuration:J(1e3),visibleOptionNum:J(6)},Pe),ta=X({},Ze,{columns:me(),modelValue:me(),toolbarPosition:pe("top"),columnsFieldNames:Object});var na=N({name:wn,props:ta,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:n,slots:a}){const o=R(),l=R(e.modelValue.slice(0)),{parent:t}=_e(Et),{children:u,linkChildren:i}=Re(At);i();const f=I(()=>Cn(e.columnsFieldNames)),b=I(()=>Ke(e.optionHeight)),c=I(()=>xn(e.columns,f.value)),g=I(()=>{const{columns:s}=e;switch(c.value){case"multiple":return s;case"cascade":return Tn(s,f.value,l);default:return[s]}}),h=I(()=>g.value.some(s=>s.length)),B=I(()=>g.value.map((s,r)=>ze(s,l.value[r],f.value))),k=I(()=>g.value.map((s,r)=>s.findIndex(S=>S[f.value.value]===l.value[r]))),D=(s,r)=>{if(l.value[s]!==r){const S=l.value.slice(0);S[s]=r,l.value=S}},y=()=>({selectedValues:l.value.slice(0),selectedOptions:B.value,selectedIndexes:k.value}),m=(s,r)=>{D(r,s),c.value==="cascade"&&l.value.forEach((S,U)=>{const q=g.value[U];nt(q,S,f.value)||D(U,q.length?q[0][f.value.value]:void 0)}),j(()=>{n("change",X({columnIndex:r},y()))})},w=(s,r)=>{const S={columnIndex:r,currentOption:s};n("clickOption",X(y(),S)),n("scrollInto",S)},O=()=>{u.forEach(r=>r.stopMomentum());const s=y();return j(()=>{n("confirm",s)}),s},C=()=>n("cancel",y()),_=()=>g.value.map((s,r)=>d(An,{value:l.value[r],fields:f.value,options:s,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:b.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:S=>m(S,r),onClickOption:S=>w(S,r),onScrollInto:S=>{n("scrollInto",{currentOption:S,columnIndex:r})}},{option:a.option})),H=s=>{if(h.value){const r={height:`${b.value}px`},S={backgroundSize:`100% ${(s-b.value)/2}px`};return[d("div",{class:ee("mask"),style:S},null),d("div",{class:[on,ee("frame")],style:r},null)]}},Y=()=>{const s=b.value*+e.visibleOptionNum,r={height:`${s}px`};return d("div",{ref:o,class:ee("columns"),style:r},[_(),H(s)])},F=()=>{if(e.showToolbar&&!t)return d(Ot,De(ce(e,On),{onConfirm:O,onCancel:C}),ce(a,Bt))};M(g,s=>{s.forEach((r,S)=>{r.length&&!nt(r,l.value[S],f.value)&&D(S,Ct(r)[f.value.value])})},{immediate:!0});let $;return M(()=>e.modelValue,s=>{!fe(s,l.value)&&!fe(s,$)&&(l.value=s.slice(0),$=s.slice(0))},{deep:!0}),M(l,s=>{fe(s,e.modelValue)||($=s.slice(0),n("update:modelValue",$))},{immediate:!0}),ye("touchmove",Je,{target:o}),se({confirm:O,getSelectedOptions:()=>B.value}),()=>{var s,r;return d("div",{class:ee()},[e.toolbarPosition==="top"?F():null,e.loading?d(Tt,{class:ee("loading")},null):null,(s=a["columns-top"])==null?void 0:s.call(a),Y(),(r=a["columns-bottom"])==null?void 0:r.call(a),e.toolbarPosition==="bottom"?F():null])}}});const aa=ne(na),oa=X({},Ze,{modelValue:me(),filter:Function,formatter:{type:Function,default:(e,n)=>n}}),la=Object.keys(Ze);function ia(e,n){if(e<0)return[];const a=Array(e);let o=-1;for(;++o<e;)a[o]=n(o);return a}const ca=(e,n)=>32-new Date(e,n-1,32).getDate(),Ye=(e,n,a,o,l,t)=>{const u=ia(n-e+1,i=>{const f=wt(e+i);return o(a,{text:f,value:f})});return l?l(a,u,t):u},sa=(e,n)=>e.map((a,o)=>{const l=n[o];if(l.length){const t=+l[0].value,u=+l[l.length-1].value;return wt(ie(+a,t,u))}return a}),ct=new Date().getFullYear(),[ra]=K("date-picker"),ua=X({},oa,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(ct-10,0,1),validator:We},maxDate:{type:Date,default:()=>new Date(ct+10,11,31),validator:We}});var da=N({name:ra,props:ua,emits:["confirm","cancel","change","update:modelValue"],setup(e,{emit:n,slots:a}){const o=R(e.modelValue),l=R(!1),t=()=>{const m=e.minDate.getFullYear(),w=e.maxDate.getFullYear();return Ye(m,w,"year",e.formatter,e.filter)},u=m=>m===e.minDate.getFullYear(),i=m=>m===e.maxDate.getFullYear(),f=m=>m===e.minDate.getMonth()+1,b=m=>m===e.maxDate.getMonth()+1,c=m=>{const{minDate:w,columnsType:O}=e,C=O.indexOf(m),_=l.value?e.modelValue[C]:o.value[C];if(_)return+_;switch(m){case"year":return w.getFullYear();case"month":return w.getMonth()+1;case"day":return w.getDate()}},g=()=>{const m=c("year"),w=u(m)?e.minDate.getMonth()+1:1,O=i(m)?e.maxDate.getMonth()+1:12;return Ye(w,O,"month",e.formatter,e.filter)},h=()=>{const m=c("year"),w=c("month"),O=u(m)&&f(w)?e.minDate.getDate():1,C=i(m)&&b(w)?e.maxDate.getDate():ca(m,w);return Ye(O,C,"day",e.formatter,e.filter)},B=I(()=>e.columnsType.map(m=>{switch(m){case"year":return t();case"month":return g();case"day":return h();default:return[]}}));M(o,m=>{fe(m,e.modelValue)||n("update:modelValue",m)}),M(()=>e.modelValue,(m,w)=>{l.value=fe(w,o.value),m=sa(m,B.value),fe(m,o.value)||(o.value=m),l.value=!1},{immediate:!0});const k=(...m)=>n("change",...m),D=(...m)=>n("cancel",...m),y=(...m)=>n("confirm",...m);return()=>d(aa,De({modelValue:o.value,"onUpdate:modelValue":m=>o.value=m,columns:B.value,onChange:k,onCancel:D,onConfirm:y},ce(e,la)),a)}});const fa=ne(da);const va="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABECAYAAAAiL3M8AAAAAXNSR0IArs4c6QAABP5JREFUeF7t3N1TG1UUAPBz7iajdkY+EmgLhAAd+2FLa1tqn7uZccZ/whmfUJIg/gH6pn9AJQkMOj713RnfSiHq+Ko+OKO2AuEjS2gJBFrGj5Lde5wstliB/crdZLOBZ+7Ze373nEvu3QwIxz+GAnjsYyxQN6Du4VJUCsBtQHobEDQA/HpXDX74aPLVdS8tWl2AIu+tn0VJ+gYQev6H8ctLrDQ0P372qVeQag7UkyieY8CyAAdwdBNCfEdJhe40JdCZRPFc2QBHR0H8NJ8KfdR0QAMjxfMq0yun2yh5IhhWMuHPmwpIx0FW2XO6DHEAV/7+Sxvc+LJzp2mABsaK59WyOQ4APUKGsZXx8K9ewdE73s3J9Cc3Lmgcs2aVAwAPGVFsOdPxm5vzcRLbNaD+5JMLGpSzQMZtBQhrEgRjS6mW+04ScHuMK0B98Y3XOWJlQz5tmADBWiAYlBdvtzxwO1Gn8YUDWcYBKAQ4jy1OdHoWR/geFB3dvEicsgB4ymTFCkEIyrl0y+9OV7ZW44RVUHR05yLx3UpbmeGskhSQlc9a52qVZDXPEQIUTWxeIoBZCzgKUUBWMq3z1Uy6lmOrBoomdi5x2M0iwEmTiStEmqxkTjYMTtV7UO8HpUHSaNYCTh6YJOfH2xZqufoinuW4gvZweBYBO82OD1gux/JTpxoOx3EFRZKly0B81hwHVhiX5JWJtpyI1axHDNsVFBkrXQEVZhDIpHJgWUJJXk61LdYjMVHPtAWk45RpFhE6jCeASwx3Y8up0w2NY6vFeka33mAanwEzHIKlMmfyw8n2JVGrWM84lipIx+E0A0BmlbOoAspr6fbleiYl8tmmQD3xrasM+QwAhE3aKqcCxvyEY9piezh65ZjgQE4ro1yYCq2IXD0vxDqygrrf37omSXTPHAcXNCK5kAnnvZCQ6DkcCtSV2L4eAO0eAISMH0gLGqFvcQ5tsb7E9nVuCQfnOSN5dTysiF41L8V7oYKiI9tDJPFpIDKuHIQ5Ul+RlckTq15Kxo25PAfScZjeVu0WHvQVIPoOh4g4Q5bT6I87q+nI5vMWq5ytkOg7izgW/Br7VwhoHTh7S5kI/axXUG9i8wcAGGrstITP/sd8OnwD+4aLXTzICsLD+yAgC77cjb3JYjcQ891+ImJ9dKBKoEiy9BMSXRMR1Ecx9lqsklB/fOuqBvxbQGj1UYKOUzmwSetVNPr4JmrqtEWk5voz/4zaMhLBHHGSlckO3+9dB85ix0gvduahh9VjpH2kI687dCSu3QWgNsPdTj+X+bfdDG8Uj5EsfMPMHpL/Tvimd9J7HwE2biJn5u0GNE/aiVt+ugaxBLSPhHcBwHhP8hmSZSD91B9//CagOm2OhPP8KcmrXzT+baMtoGZEsg1kG6nB760dATUTkmOgZkGqCqgZkKoG8juSECB7SLTAGd5qlBeOwoD8iiQUSEdKbt8A0l9Amn3iboj3+sKB/IbkCpCfkFwDsofk3e8YuQq0j8SnAcjkSxHeRHIdyA4SAdzn5dBQYQr/dPxSS/DAmgDZQQLAeD4dmhCcp+NwNQOyjEQ4mc+ERhxnJHhgTYH+s3FXLt2O2JPYx/l0+yeC83QcruZAJkhPNIJBL31jti5AFaSBsdIVVaXKPzG5/O/y5oDhu/nx0PeOl9uFgXUDepZLJL7+GmcsUEiFHwAguZBjVSHrDlTV7Gsw+B+tu3adWOZEOAAAAABJRU5ErkJggg==",ma={class:"flex justify-between items-center py-3 border-b border-b-[#D8D8D8]"},ha={class:"flex items-center"},Se=N({__name:"BaseInfoRow",props:{title:null},emits:[],setup(e,{emit:n}){return(a,o)=>{const l=Qe;return Be(),ft("div",ma,[te("div",null,Ae(e.title),1),te("div",ha,[Lt(a.$slots,"default"),d(l,{name:"arrow"})])])}}}),ga={class:"page_container !bg-white px-10 text-[#171A1D] relative"},ba=["src"],ya=te("div",{class:"text-3xl font-semibold"},"请完善个人信息",-1),wa={class:"max-w-[200px] truncate"},xa={class:"mt-[20vh]"},Ja=N({__name:"index",props:{baseData:null},setup(e){const n=zt(),a=[{name:"保密"},{name:"男"},{name:"女"}],o=ve({show:!1,content:""}),l=R(!1),t=R(!1),u=R(!1),i=ve({faceURL:history.state.avatar||"",nickname:"",gender:0,birth:0}),f=()=>{n.go(-1)},b=I(()=>i.gender===1?"男":i.gender===2?"女":"保密"),c=I(()=>i.birth?Xe(i.birth).format("YYYY-MM-DD"):"-"),g=I(()=>Xe(i.birth).format("YYYY-MM-DD").split("-")),h=()=>{Te.call("getAlbumResource",JSON.stringify({bucket_name:"user",purpose_code:1}),O=>{if(O.status==200){let C=O.data.bucket+"/"+O.data.object;console.log(O.data),Te.call("getMinIOConfit",null,_=>{_.status==200&&(i.faceURL="http://"+_.data.end_point+"/"+C)})}})},B=()=>{o.show=!0,o.content=i.nickname},k=()=>{i.nickname=o.content},D=(O,C)=>{i.gender=C},y=({selectedValues:O})=>{i.birth=new Date(O[0],O[1],O[2]).getTime(),t.value=!1},m=()=>{console.log(i),i.faceURL?i.nickname?i.gender?i.birth?w():ue({message:"请选择生日"}):ue({message:"请选择性别"}):ue({message:"请输入昵称"}):ue({message:"请选择头像"})},w=async()=>{try{Te.call("userUpdateInfo",JSON.stringify({NickName:i.nickname,FaceURL:i.faceURL,Gender:i.gender,Birth:i.birth}),O=>{ue({message:O.status}),O.status==200&&Te.call("jumpActivity",JSON.stringify({activity_name:"main"}))})}catch(O){ue({error:O,message:"修改失败！"})}};return(O,C)=>{const _=dn,H=Qe,Y=fn,F=Jt,$=vn,x=yn,s=fa;return Be(),ft("div",ga,[te("img",{class:"w-9 h-[34px] my-[5vh]",src:xe(va),alt:"",onClick:f},null,8,ba),ya,d(Se,{class:"mt-12",title:"头像",onClick:h},{default:oe(()=>[i.faceURL?(Be(),Ge(_,{key:0,width:"36",height:"36",fit:"cover",radius:"6",src:i.faceURL},null,8,["src"])):(Be(),Ge(H,{key:1,color:"#b2b2b2",size:"20",name:"photograph"}))]),_:1}),d(Se,{title:"昵称",onClick:B},{default:oe(()=>[te("div",wa,Ae(i.nickname),1)]),_:1}),d(Se,{title:"性别",onClick:C[0]||(C[0]=r=>l.value=!0)},{default:oe(()=>[te("span",null,Ae(xe(b)),1)]),_:1}),d(Se,{title:"生日",onClick:C[1]||(C[1]=r=>t.value=!0)},{default:oe(()=>[te("span",null,Ae(xe(c)),1)]),_:1}),te("div",xa,[d(Y,{block:"",type:"primary","native-type":"submit",loading:u.value,onClick:m},{default:oe(()=>[Ft(" 立即注册 ")]),_:1},8,["loading"])]),d($,{show:o.show,"onUpdate:show":C[3]||(C[3]=r=>o.show=r),title:"昵称","show-cancel-button":"",onConfirm:k,onClosed:C[4]||(C[4]=r=>o.content="")},{default:oe(()=>[d(F,{maxlength:"10",placeholder:"请输入昵称",modelValue:o.content,"onUpdate:modelValue":C[2]||(C[2]=r=>o.content=r)},null,8,["modelValue"])]),_:1},8,["show"]),d(x,{show:l.value,"onUpdate:show":C[5]||(C[5]=r=>l.value=r),actions:a,"cancel-text":"取消","close-on-click-action":"",onCancel:C[6]||(C[6]=r=>l.value=!1),onSelect:D},null,8,["show"]),d(x,{show:t.value,"onUpdate:show":C[9]||(C[9]=r=>t.value=r),"cancel-text":"取消",onCancel:C[10]||(C[10]=r=>t.value=!1)},{default:oe(()=>[d(s,{modelValue:xe(g),"onUpdate:modelValue":C[7]||(C[7]=r=>Qt(g)?g.value=r:null),title:"选择日期","min-date":new Date(1970,0,1),"max-date":new Date,onConfirm:y,onCancel:C[8]||(C[8]=r=>t.value=!1)},null,8,["modelValue","min-date","max-date"])]),_:1},8,["show"])])}}});export{Ja as default};
