System.register(["./runtime-dom.esm-bundler-legacy-93299829.js","./index-legacy-6518e8aa.js","./index-legacy-16749350.js","./constant-legacy-6f439ca4.js","./index-legacy-a073fbdb.js","./on-popup-reopen-legacy-65839532.js"],(function(e,o){"use strict";var t,n,a,l,s,r,c,i,u,d,v,p,m,f,y,h,b,w,g,I,x,O,k,C,z,S,j,A,B,P,T,L,E,R,X,Y,D,H,$,N;return{setters:[e=>{t=e.T,n=e.v,a=e.c},e=>{l=e.n,s=e.t,r=e.g,c=e.o,i=e.h,u=e.p,d=e.c,v=e.d,p=e.i,m=e.w,f=e.m,y=e.j,h=e.I},e=>{b=e.u},e=>{w=e.T,g=e.H},e=>{I=e.a5,x=e.a6,O=e.D,k=e.a7,C=e.a8,z=e.O,S=e.C,j=e.G,A=e.a2,B=e.a1,P=e.a9,T=e.N,L=e.n,E=e.l,R=e.aa,X=e.ab,Y=e.ac,D=e.F,H=e.$,$=e.ad},e=>{N=e.P}],execute:function(){function o(e,{args:o=[],done:t,canceled:n}){if(e){const a=e.apply(null,o);I(a)?a.then((e=>{e?t():n&&n()})).catch(x):a?t():n&&n()}else t()}e({a:function(){const e=$({show:!1}),o=o=>{e.show=o},t=t=>{A(e,t,{transitionAppear:!0}),o(!0)},n=()=>o(!1);return b({open:t,close:n,toggle:o}),{open:t,close:n,state:e,toggle:o}},c:o,m:function(e){const o=a(e),t=document.createElement("div");return document.body.appendChild(t),{instance:o.mount(t),unmount(){o.unmount(),document.body.removeChild(t)}}},u:K});const F=e("p",{show:Boolean,zIndex:l,overlay:s,duration:l,teleport:[String,Object],lockScroll:s,lazyRender:s,beforeClose:Function,overlayStyle:Object,overlayClass:r,transitionAppear:Boolean,closeOnClickOverlay:s});function K(){const e=O(0),o=O(0),t=O(0),n=O(0),a=O(0),l=O(0),s=O(""),r=O(!0),c=()=>{t.value=0,n.value=0,a.value=0,l.value=0,s.value="",r.value=!0};return{move:c=>{const i=c.touches[0];var u,d;t.value=(i.clientX<0?0:i.clientX)-e.value,n.value=i.clientY-o.value,a.value=Math.abs(t.value),l.value=Math.abs(n.value),(!s.value||a.value<10&&l.value<10)&&(s.value=(u=a.value,d=l.value,u>d?"horizontal":d>u?"vertical":"")),r.value&&(a.value>w||l.value>w)&&(r.value=!1)},start:t=>{c(),e.value=t.touches[0].clientX,o.value=t.touches[0].clientY},reset:c,startX:e,startY:o,deltaX:t,deltaY:n,offsetX:a,offsetY:l,direction:s,isVertical:()=>"vertical"===s.value,isHorizontal:()=>"horizontal"===s.value,isTap:r}}e("b",Object.keys(F));let M=0;const V="van-overflow-hidden";function G(e){const o=O(!1);return z(e,(e=>{e&&(o.value=e)}),{immediate:!0}),e=>()=>o.value?e():null}const[J,q]=d("overlay"),Q={show:Boolean,zIndex:l,duration:l,className:r,lockScroll:s,lazyRender:s,customStyle:Object};var U=S({name:J,props:Q,setup(e,{slots:o}){const a=O(),l=G((()=>e.show||!e.lazyRender))((()=>{var t;const l=A(p(e.zIndex),e.customStyle);return B(e.duration)&&(l.animationDuration=`${e.duration}s`),P(j("div",{ref:a,style:l,class:[q(),e.className]},[null==(t=o.default)?void 0:t.call(o)]),[[n,e.show]])}));return v("touchmove",(o=>{e.lockScroll&&u(o,!0)}),{target:a}),()=>j(t,{name:"van-fade",appear:!0},{default:l})}});const W=e("O",m(U)),Z=A({},F,{round:Boolean,position:f("center"),closeIcon:f("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:f("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[_,ee]=d("popup");var oe=S({name:_,inheritAttrs:!1,props:Z,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:a,attrs:l,slots:s}){let r,d;const p=O(),m=O(),f=G((()=>e.show||!e.lazyRender)),w=T((()=>{const o={zIndex:p.value};return B(e.duration)&&(o["center"===e.position?"animationDuration":"transitionDuration"]=`${e.duration}s`),o})),I=()=>{r||(r=!0,p.value=void 0!==e.zIndex?+e.zIndex:y(),a("open"))},x=()=>{r&&o(e.beforeClose,{done(){r=!1,a("close"),a("update:show",!1)}})},S=o=>{a("clickOverlay",o),e.closeOnClickOverlay&&x()},A=()=>{if(e.overlay)return j(W,{show:e.show,class:e.overlayClass,zIndex:p.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:S},{default:s["overlay-content"]})},$=e=>{a("clickCloseIcon",e),x()},F=()=>{if(e.closeable)return j(h,{role:"button",tabindex:0,name:e.closeIcon,class:[ee("close-icon",e.closeIconPosition),g],classPrefix:e.iconPrefix,onClick:$},null)};let J;const q=()=>{J&&clearTimeout(J),J=setTimeout((()=>{a("opened")}))},Q=()=>a("closed"),U=e=>a("keydown",e),Z=f((()=>{var o;const{round:t,position:a,safeAreaInsetTop:r,safeAreaInsetBottom:c}=e;return P(j("div",H({ref:m,style:w.value,role:"dialog",tabindex:0,class:[ee({round:t,[a]:a}),{"van-safe-area-top":r,"van-safe-area-bottom":c}],onKeydown:U},l),[null==(o=s.default)?void 0:o.call(s),F()]),[[n,e.show]])})),_=()=>{const{position:o,transition:n,transitionAppear:a}=e;return j(t,{name:n||("center"===o?"van-fade":`van-popup-slide-${o}`),appear:a,onAfterEnter:q,onAfterLeave:Q},{default:Z})};return z((()=>e.show),(e=>{e&&!r&&(I(),0===l.tabindex&&L((()=>{var e;null==(e=m.value)||e.focus()}))),!e&&r&&(r=!1,a("close"))})),b({popupRef:m}),function(e,o){const t=K(),n=o=>{t.move(o);const n=t.deltaY.value>0?"10":"01",a=i(o.target,e.value),{scrollHeight:l,offsetHeight:s,scrollTop:r}=a;let c="11";0===r?c=s>=l?"00":"01":r+s>=l&&(c="10"),"11"===c||!t.isVertical()||parseInt(c,2)&parseInt(n,2)||u(o,!0)},a=()=>{document.addEventListener("touchstart",t.start),document.addEventListener("touchmove",n,{passive:!1}),M||document.body.classList.add(V),M++},l=()=>{M&&(document.removeEventListener("touchstart",t.start),document.removeEventListener("touchmove",n),M--,M||document.body.classList.remove(V))},s=()=>o()&&l();c((()=>o()&&a())),k(s),C(s),z(o,(e=>{e?a():l()}))}(m,(()=>e.show&&e.lockScroll)),v("popstate",(()=>{e.closeOnPopstate&&(x(),d=!1)})),E((()=>{e.show&&I()})),R((()=>{d&&(a("update:show",!0),d=!1)})),k((()=>{e.show&&e.teleport&&(x(),d=!0)})),X(N,(()=>e.show)),()=>e.teleport?j(Y,{to:e.teleport},{default:()=>[A(),_()]}):j(D,null,[A(),_()])}});e("P",m(oe))}}}));
