import{C as B,H as P,D as p,ad as N,E as U,R as s,G as l,w as g,Z as F,_ as $,o as D,W as b,V as h}from"./index-3dcc8fbd.js";/* empty css              *//* empty css              */import{F as R}from"./index-8c16716c.js";import{a as x}from"./android_api-ee1231ec.js";import{a as q}from"./storage-a45bd5c0.js";import{a as d}from"./common-a47fff3e.js";import{I as A}from"./index-4ccc55cb.js";import{B as M}from"./index-a7ca7fba.js";import{F as T}from"./index-cc9a13f4.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./use-route-fa97d2d0.js";import"./index-30732979.js";import"./constant-77ae5ca0.js";import"./index-6db50d8f.js";import"./_commonjsHelpers-edff4021.js";import"./mount-component-74e25e35.js";import"./runtime-dom.esm-bundler-65ecdaea.js";import"./on-popup-reopen-bcee1d9f.js";const r=n=>(F("data-v-30dc908a"),n=n(),$(),n),E={class:"page_container !bg-white px-10 text-[#171A1D] relative"},J=r(()=>s("div",{class:"text-3xl font-semibold mt-[15vh]"},"忘记密码",-1)),O={class:"mt-3"},G=r(()=>s("div",{class:"text-sm mb-1"},"手机号",-1)),H={class:"border-b border-[rgba(126,134,142,0.16)]"},W={class:"mt-3"},Z=r(()=>s("div",{class:"text-sm mb-1"},"密码",-1)),j={class:"border-b border-[rgba(126,134,142,0.16)]"},K=r(()=>s("div",{class:"text-xs text-[#c81623] mt-2"},h("需6~20位字符"),-1)),L={class:"mt-3"},Q=r(()=>s("div",{class:"text-sm mb-1"},"确认密码",-1)),X={class:"border-b border-[rgba(126,134,142,0.16)]"},Y=r(()=>s("div",{class:"text-xs text-[#c81623] mt-2"},h("需6~20位字符"),-1)),ee={class:"mt-3"},se=r(()=>s("div",{class:"text-sm mb-1"},"获取验证码",-1)),oe={class:"get_code"},te={class:"border-b border-[rgba(126,134,142,0.16)]"},ae={class:"mt-[20vh]"},le=B({__name:"index",setup(n){q();const w=P();localStorage.getItem("IMAccount"),localStorage.getItem("IMAccount").replace(/(\d{3})(\d{4})(\d{4})/,"$1****$3");const i=p(!1),c=p(!1),u=p(!1),_=p("获取验证码"),y=/^1[3-9]\d{9}$/,e=N({phone:"",password:"",confirmpassword:"",code:""}),I=()=>{w.go(-1)},V=async()=>{let a=60;await x.call("sendSms",JSON.stringify({Phone:e.phone,Type:3}),o=>{if(o.status===200){d({message:"获取成功"});let v=setInterval(()=>{a==0?(clearInterval(v),_.value="获取验证码",u.value=!1):(_.value=a+"秒后重试",u.value=!0,a--)},1e3)}})},k=()=>{e.password!=e.confirmpassword?d({message:"俩次密码不一致"}):e.password.length<6||e.confirmpassword.length<6?d({message:"密码至少需要6位字符"}):e.code?e.code.length!=6?d({message:"请输入6位验证码"}):C():d({message:"请输入验证码"})},C=()=>{x.call("changeUserPassword",JSON.stringify({Phone:e.phone,Code:e.code,NewPass:e.password}),a=>{console.log(a,"data"),a.status==200?d({message:"修改成功"}):d({message:a.msg})})};return(a,o)=>{const v=A,m=R,f=M,S=T;return D(),U("div",E,[s("div",{class:"go-back",onClick:I},[l(v,{color:"#333",name:"arrow-left",size:"23"})]),J,l(S,{onSubmit:k},{default:g(()=>[s("div",O,[G,s("div",H,[l(m,{class:"!py-1 !pl-0",modelValue:e.phone,"onUpdate:modelValue":o[0]||(o[0]=t=>e.phone=t),name:"phone",maxlength:"11",rules:[{pattern:y,message:"请填写正确格式的手机号"}],type:"number",placeholder:"请输入手机号"},null,8,["modelValue","rules"])])]),s("div",W,[Z,s("div",j,[l(m,{class:"!py-1 !pl-0",modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=t=>e.password=t),name:"password",maxlength:"20",rules:[{required:!0,message:"请输入密码"}],type:i.value?"text":"password","right-icon":i.value?"closed-eye":"eye",onClickRightIcon:o[2]||(o[2]=t=>i.value=!i.value),placeholder:"请输入密码"},null,8,["modelValue","type","right-icon"])])]),K,s("div",L,[Q,s("div",X,[l(m,{class:"!py-1 !pl-0",modelValue:e.confirmpassword,"onUpdate:modelValue":o[3]||(o[3]=t=>e.confirmpassword=t),name:"password",maxlength:"20",rules:[{required:!0,message:"请输入密码"}],type:c.value?"text":"password","right-icon":c.value?"closed-eye":"eye",onClickRightIcon:o[4]||(o[4]=t=>c.value=!c.value),placeholder:"请输入密码"},null,8,["modelValue","type","right-icon"])])]),Y,s("div",ee,[se,s("div",oe,[s("div",te,[l(m,{class:"!py-1 !pl-0",clearable:"",modelValue:e.code,"onUpdate:modelValue":o[5]||(o[5]=t=>e.code=t),name:"code",maxlength:"6",rules:[{required:!0,message:"请输入验证码"}],type:"number",placeholder:"请输入验证码"},null,8,["modelValue"])]),s("div",null,[l(f,{color:"#c81623",size:"small",type:"primary",onClick:V,disabled:u.value},{default:g(()=>[b(h(_.value),1)]),_:1},8,["disabled"])])])]),s("div",ae,[l(f,{color:"#c81623",disabled:!(e.phone&&e.password&&e.confirmpassword&&e.code),block:"",type:"primary","native-type":"submit"},{default:g(()=>[b(" 确认 ")]),_:1},8,["disabled"])])]),_:1})])}}});const ke=z(le,[["__scopeId","data-v-30dc908a"]]);export{ke as default};
