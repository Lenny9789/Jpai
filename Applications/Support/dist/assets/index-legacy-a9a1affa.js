System.register(["./index-legacy-6518e8aa.js","./index-legacy-a073fbdb.js"],(function(o,e){"use strict";var r,a,l,n,i,t,s,c,u,d,v,g,f,h,m,y,p,w,b,z,S;return{setters:[o=>{r=o.c,a=o.n,l=o.t,n=o.m,i=o.f,t=o.I,s=o.w},o=>{c=o.C,u=o.D,d=o.p,v=o.N,g=o.a1,f=o.O,h=o.a3,m=o.a8,y=o.l,p=o.n,w=o.G,b=o.a9,z=o.aq,S=o.$}],execute:function(){const[e,x]=r("image"),L={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:a,height:a,radius:a,lazyLoad:Boolean,iconSize:a,showError:l,errorIcon:n("photo-fail"),iconPrefix:String,showLoading:l,loadingIcon:n("photo")};var I=c({name:e,props:L,emits:["load","error"],setup(o,{emit:e,slots:r}){const a=u(!1),l=u(!0),n=u(),{$Lazyload:s}=d().proxy,c=v((()=>{const e={width:i(o.width),height:i(o.height)};return g(o.radius)&&(e.overflow="hidden",e.borderRadius=i(o.radius)),e}));f((()=>o.src),(()=>{a.value=!1,l.value=!0}));const L=o=>{l.value&&(l.value=!1,e("load",o))},I=()=>{const o=new Event("load");Object.defineProperty(o,"target",{value:n.value,enumerable:!0}),L(o)},$=o=>{a.value=!0,l.value=!1,e("error",o)},j=(e,r,a)=>a?a():w(t,{name:e,size:o.iconSize,class:r,classPrefix:o.iconPrefix},null),P=()=>{if(a.value||!o.src)return;const e={alt:o.alt,class:x("img"),style:{objectFit:o.fit,objectPosition:o.position}};return o.lazyLoad?b(w("img",S({ref:n},e),null),[[z("lazy"),o.src]]):w("img",S({ref:n,src:o.src,onLoad:L,onError:$},e),null)},E=({el:o})=>{const e=()=>{o===n.value&&l.value&&I()};n.value?e():p(e)},k=({el:o})=>{o!==n.value||a.value||$()};return s&&h&&(s.$on("loaded",E),s.$on("error",k),m((()=>{s.$off("loaded",E),s.$off("error",k)}))),y((()=>{p((()=>{var e;(null==(e=n.value)?void 0:e.complete)&&!o.lazyLoad&&I()}))})),()=>{var e;return w("div",{class:x({round:o.round,block:o.block}),style:c.value},[P(),l.value&&o.showLoading?w("div",{class:x("loading")},[j(o.loadingIcon,x("loading-icon"),r.loading)]):a.value&&o.showError?w("div",{class:x("error")},[j(o.errorIcon,x("error-icon"),r.error)]):void 0,null==(e=r.default)?void 0:e.call(r)])}}});o("I",s(I))}}}));
