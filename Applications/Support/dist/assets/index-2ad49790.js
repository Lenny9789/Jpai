import{G as o,C as I,D as S,N as $,O as H,a9 as F,$ as j,ac as q,H as G,l as W,m as J,E as P,R as g,V as R,W as K,w as Q,Z as Y,_ as Z,o as V}from"./index-3dcc8fbd.js";/* empty css              *//* empty css              */import{_ as X}from"./img4-af43059c.js";import{a as N}from"./android_api-ee1231ec.js";import{s as ee}from"./storage-a45bd5c0.js";import{a as U}from"./axios-213479dd.js";import{c as L,n as O,p as te,m as D,a as E,t as b,C as oe,i as se,K as ne,w as M,f as ae}from"./index-4ccc55cb.js";import{H as le,b as re,B as ie}from"./constant-77ae5ca0.js";import{v as ce,T as ue}from"./runtime-dom.esm-bundler-65ecdaea.js";import{u as de}from"./mount-component-74e25e35.js";import{L as me}from"./index-30732979.js";import{B as he}from"./index-a7ca7fba.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";import"./common-a47fff3e.js";import"./index-6db50d8f.js";import"./_commonjsHelpers-edff4021.js";import"./on-popup-reopen-bcee1d9f.js";import"./use-route-fa97d2d0.js";const[ve,B]=L("key"),_e=o("svg",{class:B("collapse-icon"),viewBox:"0 0 30 24"},[o("path",{d:"M26 13h-2v2h2v-2zm-8-3h2V8h-2v2zm2-4h2V4h-2v2zm2 4h4V4h-2v4h-2v2zm-7 14 3-3h-6l3 3zM6 13H4v2h2v-2zm16 0H8v2h14v-2zm-12-3h2V8h-2v2zM28 0l1 1 1 1v15l-1 2H1l-1-2V2l1-1 1-1zm0 2H2v15h26V2zM6 4v2H4V4zm10 2h2V4h-2v2zM8 9v1H4V8zm8 0v1h-2V8zm-6-5v2H8V4zm4 0v2h-2V4z",fill:"currentColor"},null)]),ge=o("svg",{class:B("delete-icon"),viewBox:"0 0 32 22"},[o("path",{d:"M28 0a4 4 0 0 1 4 4v14a4 4 0 0 1-4 4H10.4a2 2 0 0 1-1.4-.6L1 13.1c-.6-.5-.9-1.3-.9-2 0-1 .3-1.7.9-2.2L9 .6a2 2 0 0 1 1.4-.6zm0 2H10.4l-8.2 8.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7l8.2 8.4H28a2 2 0 0 0 2-2V4c0-1.1-.9-2-2-2zm-5 4a1 1 0 0 1 .7.3 1 1 0 0 1 0 1.4L20.4 11l3.3 3.3c.2.2.3.5.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3L19 12.4l-3.4 3.3a1 1 0 0 1-.6.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.2.1-.5.3-.7l3.3-3.3-3.3-3.3A1 1 0 0 1 14 7c0-.3.1-.5.3-.7A1 1 0 0 1 15 6a1 1 0 0 1 .6.3L19 9.6l3.3-3.3A1 1 0 0 1 23 6z",fill:"currentColor"},null)]);var A=I({name:ve,props:{type:String,text:O,color:String,wider:Boolean,large:Boolean,loading:Boolean},emits:["press"],setup(e,{emit:n,slots:i}){const r=S(!1),a=de(),h=l=>{a.start(l),r.value=!0},m=l=>{a.move(l),a.direction.value&&(r.value=!1)},_=l=>{r.value&&(i.default||te(l),r.value=!1,n("press",e.text,e.type))},x=()=>{if(e.loading)return o(me,{class:B("loading-icon")},null);const l=i.default?i.default():e.text;switch(e.type){case"delete":return l||ge;case"extra":return l||_e;default:return l}};return()=>o("div",{class:B("wrapper",{wider:e.wider}),onTouchstartPassive:h,onTouchmovePassive:m,onTouchend:_,onTouchcancel:_},[o("div",{role:"button",tabindex:0,class:B([e.color,{large:e.large,active:r.value,delete:e.type==="delete"}])},[x()])])}});const[pe,p]=L("number-keyboard"),xe={show:Boolean,title:String,theme:D("default"),zIndex:O,teleport:[String,Object],maxlength:E(1/0),modelValue:D(""),transition:b,blurOnClose:b,showDeleteKey:b,randomKeyOrder:Boolean,closeButtonText:String,deleteButtonText:String,closeButtonLoading:Boolean,hideOnClickOutside:b,safeAreaInsetBottom:b,extraKey:{type:[String,Array],default:""}};function ye(e){for(let n=e.length-1;n>0;n--){const i=Math.floor(Math.random()*(n+1)),r=e[n];e[n]=e[i],e[i]=r}return e}var we=I({name:pe,inheritAttrs:!1,props:xe,emits:["show","hide","blur","input","close","delete","update:modelValue"],setup(e,{emit:n,slots:i,attrs:r}){const a=S(),h=()=>{const t=Array(9).fill("").map((s,c)=>({text:c+1}));return e.randomKeyOrder&&ye(t),t},m=()=>[...h(),{text:e.extraKey,type:"extra"},{text:0},{text:e.showDeleteKey?e.deleteButtonText:"",type:e.showDeleteKey?"delete":""}],_=()=>{const t=h(),{extraKey:s}=e,c=Array.isArray(s)?s:[s];return c.length===1?t.push({text:0,wider:!0},{text:c[0],type:"extra"}):c.length===2&&t.push({text:c[0],type:"extra"},{text:0},{text:c[1],type:"extra"}),t},x=$(()=>e.theme==="custom"?_():m()),l=()=>{e.show&&n("blur")},f=()=>{n("close"),e.blurOnClose&&l()},w=()=>n(e.show?"show":"hide"),u=(t,s)=>{if(t===""){s==="extra"&&l();return}const c=e.modelValue;s==="delete"?(n("delete"),n("update:modelValue",c.slice(0,c.length-1))):s==="close"?f():c.length<+e.maxlength&&(n("input",t),n("update:modelValue",c+t))},d=()=>{const{title:t,theme:s,closeButtonText:c}=e,C=i["title-left"],z=c&&s==="default";if(t||z||C)return o("div",{class:p("header")},[C&&o("span",{class:p("title-left")},[C()]),t&&o("h2",{class:p("title")},[t]),z&&o("button",{type:"button",class:[p("close"),le],onClick:f},[c])])},y=()=>x.value.map(t=>{const s={};return t.type==="delete"&&(s.default=i.delete),t.type==="extra"&&(s.default=i["extra-key"]),o(A,{key:t.text,text:t.text,type:t.type,wider:t.wider,color:t.color,onPress:u},s)}),v=()=>{if(e.theme==="custom")return o("div",{class:p("sidebar")},[e.showDeleteKey&&o(A,{large:!0,text:e.deleteButtonText,type:"delete",onPress:u},{delete:i.delete}),o(A,{large:!0,text:e.closeButtonText,type:"close",color:"blue",loading:e.closeButtonLoading,onPress:u},null)])};return H(()=>e.show,t=>{e.transition||n(t?"show":"hide")}),e.hideOnClickOutside&&oe(a,l,{eventName:"touchstart"}),()=>{const t=d(),s=o(ue,{name:e.transition?"van-slide-up":""},{default:()=>[F(o("div",j({ref:a,style:se(e.zIndex),class:p({unfit:!e.safeAreaInsetBottom,"with-title":!!t}),onAnimationend:w,onTouchstartPassive:ne},r),[t,o("div",{class:p("body")},[o("div",{class:p("keys")},[y()]),v()])]),[[ce,e.show]])]});return e.teleport?o(q,{to:e.teleport},{default:()=>[s]}):s}}});const be=M(we),[Te,T]=L("password-input"),Se={info:String,mask:b,value:D(""),gutter:O,length:E(6),focused:Boolean,errorInfo:String};var Be=I({name:Te,props:Se,emits:["focus"],setup(e,{emit:n}){const i=a=>{a.stopPropagation(),n("focus",a)},r=()=>{const a=[],{mask:h,value:m,gutter:_,focused:x}=e,l=+e.length;for(let f=0;f<l;f++){const w=m[f],u=f!==0&&!_,d=x&&f===m.length;let y;f!==0&&_&&(y={marginLeft:ae(_)}),a.push(o("li",{class:[{[ie]:u},T("item",{focus:d})],style:y},[h?o("i",{style:{visibility:w?"visible":"hidden"}},null):w,d&&o("div",{class:T("cursor")},null)]))}return a};return()=>{const a=e.errorInfo||e.info;return o("div",{class:T()},[o("ul",{class:[T("security"),{[re]:!e.gutter}],onTouchstartPassive:i},[r()]),a&&o("div",{class:T(e.errorInfo?"error-info":"info")},[a])])}}});const Ie=M(Be);const k=e=>(Y("data-v-599b011d"),e=e(),Z(),e),Ce={class:"box"},Pe={class:"cord_box"},Re=k(()=>g("div",{class:"yzm_text"},"验证码已发送至手机",-1)),Ve={class:"number_text"},Ae={class:"mr-2"},De=k(()=>g("div",{class:"text-sm text-[#333]"},"请输入验证码",-1)),Le={key:0,class:"text-[#333] text-xs mt-4"},Oe={class:"text-[#0089FF]"},ke=k(()=>g("span",{class:"ml-1"},"重发验证码",-1)),ze={key:1,style:{"margin-top":"1.5rem"}},Ke=I({__name:"index",props:{baseData:null},setup(e){const n=e;console.log(n,"props");const i=G(),r=S(),a=S(!0),h=S(60);let m;const _=u=>{i.push({path:"getCode",query:{isRegiste:u+""}})},x=()=>{const{phoneNumber:u,areaCode:d,isRegiste:y}=n.baseData;try{N.call("loginOrRegister",JSON.stringify({Phone:u,Code:r.value}),v=>{if(console.log(v),v.status==200){console.log(v,"data");const t=v.imToken,s=v.userID;ee(t,t,s),v.IsNew==!0&&(U.post("http://www.myjpai.com:10066/api/AB/InitCredit",{UserId:s}),U.post("http://www.myjpai.com:10066/api/AB/InitAcctBalance",{UserId:s}),i.push("/setPassword"))}})}catch(v){}},l=()=>{m&&clearInterval(m),h.value=60,m=setInterval(()=>{h.value>0?h.value-=1:clearInterval(m)},1e3)},f=()=>{N.call("sendSms",JSON.stringify({Phone:n.baseData.phoneNumber,Type:n.baseData.isRegiste?"1":"3"}),u=>{console.log(u,"data")})},w=()=>{l(),f()};return H(r,u=>{u.length===6&&x()}),W(()=>{l(),f()}),J(()=>{m&&clearInterval(m)}),(u,d)=>{const y=Ie,v=he,t=be;return V(),P("div",Ce,[g("img",{class:"back",src:X,alt:"",onClick:d[0]||(d[0]=s=>_(e.baseData.isRegiste))}),g("div",Pe,[Re,g("div",Ve,[g("span",Ae,R(e.baseData.areaCode),1),g("span",null,R(e.baseData.phoneNumber),1)]),De,o(y,{class:"!m-0",value:r.value,mask:!1,focused:a.value,onFocus:d[1]||(d[1]=s=>a.value=!0)},null,8,["value","focused"]),h.value?(V(),P("div",Le,[g("span",Oe,R(h.value)+"s",1),K("后"),ke])):(V(),P("div",ze,[o(v,{color:"#c81623",size:"small",type:"primary",onClick:w},{default:Q(()=>[K("获取验证码")]),_:1})])),o(t,{modelValue:r.value,"onUpdate:modelValue":d[2]||(d[2]=s=>r.value=s),show:a.value,onBlur:d[3]||(d[3]=s=>a.value=!1)},null,8,["modelValue","show"])])])}}});const nt=fe(Ke,[["__scopeId","data-v-599b011d"]]);export{nt as default};
