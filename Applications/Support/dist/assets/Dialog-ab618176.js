import{w as H}from"./runtime-dom.esm-bundler-65ecdaea.js";import{p as z,b as L,P as M,c as U}from"./mount-component-74e25e35.js";import{B as P}from"./index-a7ca7fba.js";import{c as S,l as j,t as x,w as D,q,n as G,g as V,m as Y,f as J}from"./index-4ccc55cb.js";import{u as Q}from"./use-placeholder-ddc70116.js";import{C as k,D as E,G as n,a2 as O,N as T,ad as W,$ as X,a0 as Z,a6 as _,aj as ee}from"./index-3dcc8fbd.js";import{u as te}from"./index-30732979.js";import{r as ne,u as oe}from"./use-route-fa97d2d0.js";import{B as ae,a as le}from"./constant-77ae5ca0.js";const[R,A]=S("action-bar"),N=Symbol(R),re={placeholder:Boolean,safeAreaInsetBottom:x};var se=k({name:R,props:re,setup(e,{slots:c}){const o=E(),i=Q(o,A),{linkChildren:l}=j(N);l();const f=()=>{var m;return n("div",{ref:o,class:[A(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=c.default)==null?void 0:m.call(c)])};return()=>e.placeholder?i(f):f()}});const ce=D(se),[ie,ue]=S("action-bar-button"),de=O({},ne,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var fe=k({name:ie,props:de,setup(e,{slots:c}){const o=oe(),{parent:i,index:l}=q(N),f=T(()=>{if(i){const r=i.children[l.value-1];return!(r&&"isButton"in r)}}),m=T(()=>{if(i){const r=i.children[l.value+1];return!(r&&"isButton"in r)}});return te({isButton:!0}),()=>{const{type:r,icon:B,text:g,color:C,loading:w,disabled:v}=e;return n(P,{class:ue([r,{last:m.value,first:f.value}]),size:"large",type:r,icon:B,color:C,loading:w,disabled:v,onClick:o},{default:()=>[c.default?c.default():g]})}}});const p=D(fe),[me,s,b]=S("dialog"),Be=O({},z,{title:String,theme:String,width:G,message:[String,Function],callback:Function,allowHtml:Boolean,className:V,transition:Y("van-dialog-bounce"),messageAlign:String,closeOnPopstate:x,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:x,closeOnClickOverlay:Boolean}),ge=[...L,"transition","closeOnPopstate"];var ke=k({name:me,props:Be,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:c,slots:o}){const i=E(),l=W({confirm:!1,cancel:!1}),f=t=>c("update:show",t),m=t=>{var a;f(!1),(a=e.callback)==null||a.call(e,t)},r=t=>()=>{e.show&&(c(t),e.beforeClose?(l[t]=!0,U(e.beforeClose,{args:[t],done(){m(t),l[t]=!1},canceled(){l[t]=!1}})):m(t))},B=r("cancel"),g=r("confirm"),C=H(t=>{var a,u;if(t.target!==((u=(a=i.value)==null?void 0:a.popupRef)==null?void 0:u.value))return;({Enter:e.showConfirmButton?g:_,Escape:e.showCancelButton?B:_})[t.key](),c("keydown",t)},["enter","esc"]),w=()=>{const t=o.title?o.title():e.title;if(t)return n("div",{class:s("header",{isolated:!e.message&&!o.default})},[t])},v=t=>{const{message:a,allowHtml:u,messageAlign:d}=e,h=s("message",{"has-title":t,[d]:d}),y=ee(a)?a():a;return u&&typeof y=="string"?n("div",{class:h,innerHTML:y},null):n("div",{class:h},[y])},$=()=>{if(o.default)return n("div",{class:s("content")},[o.default()]);const{title:t,message:a,allowHtml:u}=e;if(a){const d=!!(t||o.title);return n("div",{key:u?1:0,class:s("content",{isolated:!d})},[v(d)])}},F=()=>n("div",{class:[le,s("footer")]},[e.showCancelButton&&n(P,{size:"large",text:e.cancelButtonText||b("cancel"),class:s("cancel"),style:{color:e.cancelButtonColor},loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&n(P,{size:"large",text:e.confirmButtonText||b("confirm"),class:[s("confirm"),{[ae]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]),I=()=>n(ce,{class:s("footer")},{default:()=>[e.showCancelButton&&n(p,{type:"warning",text:e.cancelButtonText||b("cancel"),class:s("cancel"),color:e.cancelButtonColor,loading:l.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&n(p,{type:"danger",text:e.confirmButtonText||b("confirm"),class:s("confirm"),color:e.confirmButtonColor,loading:l.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]}),K=()=>o.footer?o.footer():e.theme==="round-button"?I():F();return()=>{const{width:t,title:a,theme:u,message:d,className:h}=e;return n(M,X({ref:i,role:"dialog",class:[s([u]),h],style:{width:J(t)},tabindex:0,"aria-labelledby":a||d,onKeydown:C,"onUpdate:show":f},Z(e,ge)),{default:()=>[w(),$(),K()]})}}});export{ke as s};
